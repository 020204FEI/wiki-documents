name: Check Pull Requests

on:
  pull_request:
    paths-ignore:
      - "ISSUE_TEMPLATE/**"
      - ".github/**.md"
      - ".gitignore"
      - "demo/**"
      - "docker/**"
      - "HOW_TO.md"
      - "TASK.md"
      - "SECURITY.md"
      - "README.md"
      - "README_zh-CN.md"
      

jobs:
  lint:
    name: test_ci
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v1.0.0
            
      - name: NPM RUN for HTML BUILD
        run: |
            curl -sS https://dl.yarnpkg.com/debian/pubkey.gpg | sudo apt-key add -
            echo "deb https://dl.yarnpkg.com/debian/ stable main" | sudo tee /etc/apt/sources.list.d/yarn.list
            cd  ~/wiki-documents
            sudo apt remove cmdtest
            sudo apt update && sudo apt install yarn
            yarn
            yarn build
      
      - name: PUBLISH to WEBSITE
        run: |
            cd  ~/wiki-documents/build
            cp  ~/wiki-documents/CNAME ./
            git init
            git remote add github git@github.com:Seeed-Studio/wiki-documents.git
            git checkout -b HTML_RE 
            git add .
            git commit -m "Update"
            git push -u github HTML_RE -f





          
